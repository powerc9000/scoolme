/**
 * AngularStrap - Twitter Bootstrap directives for AngularJS
 * @version v0.5.4 - 2012-12-03
 * @link http://angular-strap.github.com
 * @author Olivier Louvignes
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("$strap.config",[]).value("$strap.config",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").directive("bsButton",["$parse",function(e){"use strict";return{restrict:"A",require:"ngModel",link:function(n,r,i,s){var o=e(i.ngModel),u=o.assign;r.attr("data-toggle")==="button"&&r.removeAttr("data-toggle"),r.parent().attr("data-toggle")==="buttons-checkbox"&&r.parent().removeAttr("data-toggle"),n.$watch(i.ngModel,function(e,t){e?r.addClass("active"):r.removeClass("active")}),r.on("click",function(e){n.$apply(function(){u(n,!o(n))})}),o(n)&&r.addClass("active")}}}]),angular.module("$strap.directives").directive("bsDatepicker",["$timeout",function(e){"use strict";var t={"/":"[\\/]","-":"[-]",dd:"(?:(?:[0-2]?\\d{1})|(?:[3][01]{1}))",mm:"(?:[0]?[1-9]|[1][012])",yyyy:"(?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3}))(?![\\d])"};return{restrict:"A",require:"?ngModel",link:function(n,r,i,s){s&&r.on("changeDate",function(e){n.$apply(function(){s.$setViewValue(r.val())})});var o=function(e,n){n||(n={});var r=e,i=t;return angular.forEach(i,function(e,t){r=r.split(t).join(e)}),new RegExp("^"+r+"$",["i"])},u=o(i.dateFormat||"mm/dd/yyyy");s.$parsers.unshift(function(e){return!e||u.test(e)?(s.$setValidity("date",!0),e):(s.$setValidity("date",!1),undefined)});var a=r.next('[data-toggle="datepicker"]');a.length&&a.on("click",function(){r.datepicker("show")});var f=r.closest(".popover");f&&f.on("hide",function(e){var t=r.data("datepicker");t&&(t.picker.remove(),r.data("datepicker",null))}),r.attr("data-toggle","datepicker"),r.datepicker({autoclose:!0})}}}]),angular.module("$strap.directives").directive("bsDropdown",["$parse","$compile",function(e,t){"use strict";var n=Array.prototype.slice,r='<ul class="dropdown-menu" role="menu" aria-labelledby="drop1"><li ng-repeat="item in items" ng-class="{divider: !!item.divider, \'dropdown-submenu\': !!item.submenu && item.submenu.length}"><a ng-hide="!!item.divider" tabindex="-1" href="{{item.href}}">{{item.text}}</a></li></ul>',i=function(e,n,i){var o,u,a;for(var f=0,l=e.length;f<l;f++)if(o=e[f].submenu)a=i.$new(!0),a.items=o,u=t(r)(a),u=u.appendTo(n.children("li:nth-child("+(f+1)+")")),s(o,u,a)},s=function(){var e=n.call(arguments);setTimeout(function(){i.apply(null,e)})};return{restrict:"EA",scope:!0,link:function(i,o,u){var a=e(u.bsDropdown);i.items=a(i);var f=t(r)(i);s(i.items,f,i),f.insertAfter(o),o.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}]),angular.module("$strap.directives").directive("bsModal",["$parse","$compile","$http","$timeout",function(e,t,n,r){"use strict";return{restrict:"A",scope:!0,link:function(s,o,u,a){var f=e(u.bsModal),l=f.assign;n.get(f(s)).success(function(e){s.dismiss=function(){i.modal("hide")},s.show=function(){i.modal("show")};var n=f(s).replace(/\//g,"-").replace(/\./g,"-").replace("html",s.$id),i=$("<div></div>").attr("id",n).addClass("modal hide fade").html(e);$("body").append(i),o.attr("href","#"+n).attr("data-toggle","modal"),r(function(){t(i)(s)})})}}}]),angular.module("$strap.directives").directive("bsPopover",["$parse","$compile","$http","$timeout",function(e,t,n,r){"use strict";return $("body").on("keyup",function(e){e.keyCode===27&&$(".popover.in").each(function(){var e=$(this);e.popover("hide")})}),{restrict:"A",scope:!0,link:function(s,o,u,a){var f=e(u.bsPopover),l=f.assign;n.get(f(s)).success(function(e){s.dismiss=function(){o.popover("hide")},s.show=function(){o.popover("show")},!u.unique||o.on("show",function(e){$(".popover.in").each(function(){var e=$(this),t=e.data("popover");t&&!t.$element.is(o)&&e.popover("hide")})}),o.popover({content:function(){return r(function(){var e=o.data("popover"),n=e.tip();t(n)(s),setTimeout(function(){e.refresh()})}),e},html:!0});var n=o.data("popover");n.refresh=function(){var e=this.tip(),t,n,r,i,s,o;s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height+10,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i-10,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r-10};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width+10}}e.offset(o)},n.show=function(){var e=$.Event("show");this.$element.trigger(e);if(e.isDefaultPrevented())return;var t=$.fn.popover.Constructor.prototype.show.apply(this,arguments);return this.$tip.data("popover",this),t},n.hide=function(){var e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;return $.fn.popover.Constructor.prototype.hide.apply(this,arguments)}})}}}]),angular.module("$strap.directives").directive("bsTimepicker",["$timeout",function(e){"use strict";var t="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?(?:\\s?(?:am|AM|pm|PM))?)";return{restrict:"A",require:"?ngModel",link:function(n,r,i,s){s&&r.on("change",function(e){n.$apply(function(){s.$setViewValue(r.val())})});var o=new RegExp("^"+t+"$",["i"]);s.$parsers.unshift(function(e){return!e||o.test(e)?(s.$setValidity("time",!0),e):(s.$setValidity("time",!1),undefined)});var u=r.closest(".popover");u&&u.on("hide",function(e){var t=r.data("timepicker");t&&(t.$widget.remove(),r.data("timepicker",null))}),r.attr("data-toggle","timepicker"),r.timepicker()}}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile","$http","$timeout",function(e,t,n,r){"use strict";return{restrict:"A",scope:!0,link:function(n,r,i,s){var o=e(i.bsTooltip),u=o.assign;!i.unique||r.on("show",function(e){$(".tooltip.in").each(function(){var e=$(this),t=e.data("tooltip");t&&!t.$element.is(r)&&e.tooltip("hide")})}),r.tooltip({title:o(n),html:!0});var a=r.data("tooltip");a.show=function(){var e=$.Event("show");this.$element.trigger(e);if(e.isDefaultPrevented())return;var t=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.$tip.data("tooltip",this),t},a.hide=function(){var e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;return $.fn.tooltip.Constructor.prototype.hide.apply(this,arguments)}}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(e){"use strict";return{restrict:"A",require:"?ngModel",link:function(n,r,i,s){var o=e(i.bsTypeahead),u=o.assign;r.attr("data-provide","typeahead"),r.typeahead({source:o(n),items:i.items,updater:function(e){return s&&n.$apply(function(){s.$setViewValue(e)}),e}})}}}]);